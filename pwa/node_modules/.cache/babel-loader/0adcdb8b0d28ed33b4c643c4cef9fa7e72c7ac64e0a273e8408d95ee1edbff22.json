{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\FamilyBubble\\\\pwa\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { auth } from './firebase';\nimport MainApp from './components/bubble/MainApp';\nimport Welcome from './components/auth/Welcome';\nimport Login from './components/auth/Login';\nimport JoinBubble from './components/auth/JoinBubble';\nimport CreateBubbleFlow from './components/auth/CreateBubbleFlow';\nimport { Purchases, LogLevel } from '@revenuecat/purchases-js';\nimport { CheckCircle2, XCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FamilyBubbleApp() {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [view, setView] = useState('welcome'); // welcome, login, join, create, main, purchaseSuccess, purchaseError\n  const [joinToken, setJoinToken] = useState(null);\n  const [bubbleCreationData, setBubbleCreationData] = useState(null);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const [isLapsedSubscriber, setIsLapsedSubscriber] = useState(false);\n  const [purchaseError, setPurchaseError] = useState(null);\n  const [anonymousId, setAnonymousId] = useState(null);\n  useEffect(() => {\n    const initializePurchases = async user => {\n      Purchases.setLogLevel(LogLevel.DEBUG);\n      await Purchases.configure({\n        apiKey: \"test_ZUBBwQojxkZCoVcCxjqjtUdSdzr\",\n        appUserId: user.uid\n      });\n\n      // Listen for customer info updates\n      Purchases.addCustomerInfoUpdateListener(info => {\n        const premiumEntitlement = info.entitlements.active[\"FamilyBubble Premium\"];\n        if (typeof premiumEntitlement !== \"undefined\") {\n          setIsSubscribed(true);\n        } else {\n          setIsSubscribed(false);\n        }\n      });\n      const customerInfo = await Purchases.getSharedInstance().getCustomerInfo();\n      const premiumEntitlement = customerInfo.entitlements.active[\"FamilyBubble Premium\"];\n      const wasOnceSubscriber = customerInfo.entitlements.all[\"FamilyBubble Premium\"];\n      if (typeof premiumEntitlement !== \"undefined\") {\n        setIsSubscribed(true);\n      } else if (typeof wasOnceSubscriber !== \"undefined\") {\n        setIsLapsedSubscriber(true);\n      }\n    };\n    const unsubscribe = auth.onAuthStateChanged(async user => {\n      setCurrentUser(user);\n      setLoading(false);\n      if (user && !user.isAnonymous) {\n        // Don't run for the temporary anonymous user\n        await initializePurchases(user);\n        setView('main');\n      } else if (user && user.isAnonymous) {\n        // This case is handled by the login logic after account creation\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleLogout = () => {\n    auth.signOut().then(() => {\n      Purchases.getSharedInstance().logOut();\n      setIsSubscribed(false);\n      setIsLapsedSubscriber(false);\n      setView('welcome');\n      setJoinToken(null);\n      setBubbleCreationData(null);\n    });\n  };\n  const handlePurchase = async onSuccess => {\n    try {\n      // Ensure Purchases is configured, especially for the anonymous user creation flow.\n      if (!Purchases.isConfigured()) {\n        console.log(\"Configuring Purchases for anonymous user...\");\n        const appUserId = Purchases.generateRevenueCatAnonymousAppUserId();\n        setAnonymousId(appUserId); // Store anonymous ID for later\n        await Purchases.configure({\n          apiKey: \"test_ZUBBwQojxkZCoVcCxjqjtUdSdzr\",\n          appUserId: appUserId\n        });\n      }\n      const purchases = Purchases.getSharedInstance();\n      const offerings = await purchases.getOfferings();\n      const currentOffering = offerings.current;\n      if (!currentOffering) {\n        alert(\"No offerings found.\");\n        return;\n      }\n      const {\n        customerInfo\n      } = await purchases.presentPaywall({\n        offering: currentOffering\n      });\n\n      // Optimistically call onSuccess. The listener will handle the state update.\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (error) {\n      console.error(\"Paywall presentation or purchase error:\", error);\n\n      // RevenueCat JS SDK throws a CodedError. We can inspect the code.\n      const isCancelled = error.code === 2; // PURCHASE_CANCELLED code from SDK\n\n      if (isCancelled) {\n        console.log(\"Purchase was cancelled by the user.\");\n        // No need to show an error screen for cancellation.\n        return;\n      }\n\n      // For all other errors, show a dedicated error screen.\n      setPurchaseError(\"Your purchase could not be completed. Please check your payment details and try again.\");\n      setView('purchaseError');\n    }\n  };\n  const handleRestorePurchases = async () => {\n    try {\n      const customerInfo = await Purchases.getSharedInstance().restorePurchases();\n      const premiumEntitlement = customerInfo.entitlements.active[\"FamilyBubble Premium\"];\n      if (typeof premiumEntitlement !== \"undefined\") {\n        setIsSubscribed(true);\n        setIsLapsedSubscriber(false);\n        alert(\"Your purchases have been restored.\");\n      } else {\n        alert(\"No active subscriptions found to restore.\");\n      }\n    } catch (error) {\n      console.error(error);\n      alert(\"Failed to restore purchases. Please try again.\");\n    }\n  };\n  const handleLoginBack = () => {\n    if (joinToken) {\n      setView('join');\n    } else if (bubbleCreationData) {\n      setView('create');\n    } else {\n      setView('welcome');\n    }\n  };\n  const resetAuthFlow = () => {\n    setView('login');\n    setJoinToken(null);\n    setBubbleCreationData(null);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-blue-950 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentUser) {\n    if (view === 'welcome') {\n      return /*#__PURE__*/_jsxDEV(Welcome, {\n        onLogin: resetAuthFlow,\n        onCreate: () => setView('create'),\n        onJoin: () => setView('join')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 14\n      }, this);\n    }\n    if (view === 'join') {\n      return /*#__PURE__*/_jsxDEV(JoinBubble, {\n        onJoin: token => {\n          setJoinToken(token);\n          setView('login');\n        },\n        onBack: () => setView('welcome')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 14\n      }, this);\n    }\n    if (view === 'create') {\n      return /*#__PURE__*/_jsxDEV(CreateBubbleFlow, {\n        handlePurchase: handlePurchase,\n        onComplete: data => {\n          setBubbleCreationData(data);\n          // Go to a success screen instead of straight to the app\n          setView('purchaseSuccess');\n        },\n        onBack: () => setView('welcome')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 14\n      }, this);\n    }\n    if (view === 'purchaseSuccess') {\n      return /*#__PURE__*/_jsxDEV(PurchaseSuccessView, {\n        onContinue: async () => {\n          try {\n            const data = bubbleCreationData;\n            const userCredential = await auth.createUserWithEmailAndPassword(data.email, data.password);\n            const newUser = userCredential.user;\n\n            // Link anonymous RevenueCat user to the new Firebase user\n            if (anonymousId) {\n              console.log(`Logging into RevenueCat to link anonymous user ${anonymousId} to ${newUser.uid}`);\n              await Purchases.getSharedInstance().logIn(newUser.uid);\n              setAnonymousId(null);\n            }\n            // The onAuthStateChanged listener will now pick up the new user and switch to the main app view.\n          } catch (error) {\n            console.error(\"Firebase user creation failed:\", error);\n            setPurchaseError(`Account creation failed: ${error.message}`);\n            setView('purchaseError');\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 14\n      }, this);\n    }\n    if (view === 'purchaseError') {\n      return /*#__PURE__*/_jsxDEV(PurchaseErrorView, {\n        message: purchaseError,\n        onRetry: () => {\n          setView('create');\n          setPurchaseError(null);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 14\n      }, this);\n    }\n    if (view === 'login') {\n      return /*#__PURE__*/_jsxDEV(Login, {\n        onLoginSuccess: () => setView('main'),\n        onBack: handleLoginBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n  // This screen is now only for lapsed subscribers who log in\n  if (view === 'main' && isLapsedSubscriber && !isSubscribed) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-6 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-white mb-4\",\n        children: \"Your Subscription has Expired\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400 mb-8\",\n        children: \"Please renew your subscription to continue using premium features.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handlePurchase(),\n        className: \"w-full max-w-sm bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg hover:shadow-purple-600/30 transition-all\",\n        children: \"Renew Subscription\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"mt-8 text-gray-400 text-sm hover:text-white transition-colors\",\n        children: \"Sign Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-950\",\n    children: /*#__PURE__*/_jsxDEV(MainApp, {\n      userId: currentUser.uid,\n      onLogout: handleLogout,\n      joinToken: joinToken,\n      bubbleCreationData: bubbleCreationData,\n      onBubbleCreated: () => setBubbleCreationData(null),\n      isSubscribed: isSubscribed,\n      onUpgrade: handlePurchase,\n      onRestorePurchases: handleRestorePurchases,\n      onInitiateCreate: () => setView('create')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 5\n  }, this);\n}\n_s(FamilyBubbleApp, \"cy3pqEWFN2OKQqCvnukZnwiHu3s=\");\n_c = FamilyBubbleApp;\nconst PurchaseSuccessView = ({\n  onContinue\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-950 via-black to-blue-950 text-white flex flex-col items-center justify-center p-4 text-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-md w-full z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/5 border border-white/10 rounded-3xl p-8 backdrop-blur-lg\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle2, {\n          size: 64,\n          className: \"mx-auto text-emerald-400 mb-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold mb-2\",\n          children: \"Purchase Successful!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400 mb-8\",\n          children: \"Welcome to FamilyBubble Premium. Let's finish creating your bubble.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onContinue,\n          className: \"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-purple-600/30 transition-all transform hover:scale-105\",\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 267,\n    columnNumber: 5\n  }, this);\n};\n_c2 = PurchaseSuccessView;\nconst PurchaseErrorView = ({\n  message,\n  onRetry\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-950 via-black to-rose-900 text-white flex flex-col items-center justify-center p-4 text-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-md w-full z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/5 border border-white/10 rounded-3xl p-8 backdrop-blur-lg\",\n        children: [/*#__PURE__*/_jsxDEV(XCircle, {\n          size: 64,\n          className: \"mx-auto text-rose-500 mb-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold mb-2\",\n          children: \"Purchase Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400 mb-8\",\n          children: message || \"An unexpected error occurred. Please try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onRetry,\n          className: \"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-purple-600/30 transition-all transform hover:scale-105\",\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n};\n_c3 = PurchaseErrorView;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"FamilyBubbleApp\");\n$RefreshReg$(_c2, \"PurchaseSuccessView\");\n$RefreshReg$(_c3, \"PurchaseErrorView\");","map":{"version":3,"names":["React","useState","useEffect","auth","MainApp","Welcome","Login","JoinBubble","CreateBubbleFlow","Purchases","LogLevel","CheckCircle2","XCircle","jsxDEV","_jsxDEV","FamilyBubbleApp","_s","currentUser","setCurrentUser","loading","setLoading","view","setView","joinToken","setJoinToken","bubbleCreationData","setBubbleCreationData","isSubscribed","setIsSubscribed","isLapsedSubscriber","setIsLapsedSubscriber","purchaseError","setPurchaseError","anonymousId","setAnonymousId","initializePurchases","user","setLogLevel","DEBUG","configure","apiKey","appUserId","uid","addCustomerInfoUpdateListener","info","premiumEntitlement","entitlements","active","customerInfo","getSharedInstance","getCustomerInfo","wasOnceSubscriber","all","unsubscribe","onAuthStateChanged","isAnonymous","handleLogout","signOut","then","logOut","handlePurchase","onSuccess","isConfigured","console","log","generateRevenueCatAnonymousAppUserId","purchases","offerings","getOfferings","currentOffering","current","alert","presentPaywall","offering","error","isCancelled","code","handleRestorePurchases","restorePurchases","handleLoginBack","resetAuthFlow","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","onCreate","onJoin","token","onBack","onComplete","data","PurchaseSuccessView","onContinue","userCredential","createUserWithEmailAndPassword","email","password","newUser","logIn","message","PurchaseErrorView","onRetry","onLoginSuccess","onClick","userId","onLogout","onBubbleCreated","onUpgrade","onRestorePurchases","onInitiateCreate","_c","size","_c2","_c3","$RefreshReg$"],"sources":["C:/Users/ADMIN/FamilyBubble/pwa/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { auth } from './firebase';\nimport MainApp from './components/bubble/MainApp';\nimport Welcome from './components/auth/Welcome';\nimport Login from './components/auth/Login';\nimport JoinBubble from './components/auth/JoinBubble';\nimport CreateBubbleFlow from './components/auth/CreateBubbleFlow';\nimport { Purchases, LogLevel } from '@revenuecat/purchases-js';\nimport { CheckCircle2, XCircle } from 'lucide-react';\n\nexport default function FamilyBubbleApp() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [view, setView] = useState('welcome'); // welcome, login, join, create, main, purchaseSuccess, purchaseError\n  const [joinToken, setJoinToken] = useState(null);\n  const [bubbleCreationData, setBubbleCreationData] = useState(null);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const [isLapsedSubscriber, setIsLapsedSubscriber] = useState(false);\n  const [purchaseError, setPurchaseError] = useState(null);\n  const [anonymousId, setAnonymousId] = useState(null);\n\n  useEffect(() => {\n    const initializePurchases = async (user) => {\n      Purchases.setLogLevel(LogLevel.DEBUG);\n\n      await Purchases.configure({\n        apiKey: \"test_ZUBBwQojxkZCoVcCxjqjtUdSdzr\",\n        appUserId: user.uid,\n      });\n\n      // Listen for customer info updates\n      Purchases.addCustomerInfoUpdateListener((info) => {\n        const premiumEntitlement = info.entitlements.active[\"FamilyBubble Premium\"];\n        if (typeof premiumEntitlement !== \"undefined\") {\n          setIsSubscribed(true);\n        } else {\n          setIsSubscribed(false);\n        }\n      });\n\n      const customerInfo = await Purchases.getSharedInstance().getCustomerInfo();\n      const premiumEntitlement = customerInfo.entitlements.active[\"FamilyBubble Premium\"];\n      const wasOnceSubscriber = customerInfo.entitlements.all[\"FamilyBubble Premium\"];\n\n      if (typeof premiumEntitlement !== \"undefined\") {\n        setIsSubscribed(true);\n      } else if (typeof wasOnceSubscriber !== \"undefined\") {\n        setIsLapsedSubscriber(true);\n      }\n    };\n\n    const unsubscribe = auth.onAuthStateChanged(async user => {\n      setCurrentUser(user);\n      setLoading(false);\n\n      if (user && !user.isAnonymous) { // Don't run for the temporary anonymous user\n        await initializePurchases(user);\n        setView('main');\n      } else if (user && user.isAnonymous) {\n        // This case is handled by the login logic after account creation\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n\n  const handleLogout = () => {\n    auth.signOut().then(() => {\n      Purchases.getSharedInstance().logOut();\n      setIsSubscribed(false);\n      setIsLapsedSubscriber(false);\n      setView('welcome');\n      setJoinToken(null);\n      setBubbleCreationData(null);\n    });\n  };\n  \n  const handlePurchase = async (onSuccess) => {\n    try {\n      // Ensure Purchases is configured, especially for the anonymous user creation flow.\n      if (!Purchases.isConfigured()) {\n        console.log(\"Configuring Purchases for anonymous user...\");\n        const appUserId = Purchases.generateRevenueCatAnonymousAppUserId();\n        setAnonymousId(appUserId); // Store anonymous ID for later\n        await Purchases.configure({\n          apiKey: \"test_ZUBBwQojxkZCoVcCxjqjtUdSdzr\",\n          appUserId: appUserId,\n        });\n      }\n\n      const purchases = Purchases.getSharedInstance();\n      const offerings = await purchases.getOfferings();\n      const currentOffering = offerings.current;\n      if (!currentOffering) {\n        alert(\"No offerings found.\");\n        return;\n      }\n\n      const { customerInfo } = await purchases.presentPaywall({ offering: currentOffering });\n      \n      // Optimistically call onSuccess. The listener will handle the state update.\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (error) {\n      console.error(\"Paywall presentation or purchase error:\", error);\n      \n      // RevenueCat JS SDK throws a CodedError. We can inspect the code.\n      const isCancelled = error.code === 2; // PURCHASE_CANCELLED code from SDK\n\n      if (isCancelled) {\n          console.log(\"Purchase was cancelled by the user.\");\n          // No need to show an error screen for cancellation.\n          return;\n      }\n\n      // For all other errors, show a dedicated error screen.\n      setPurchaseError(\"Your purchase could not be completed. Please check your payment details and try again.\");\n      setView('purchaseError');\n    }\n  };\n\n  const handleRestorePurchases = async () => {\n    try {\n      const customerInfo = await Purchases.getSharedInstance().restorePurchases();\n      const premiumEntitlement = customerInfo.entitlements.active[\"FamilyBubble Premium\"];\n\n      if (typeof premiumEntitlement !== \"undefined\") {\n        setIsSubscribed(true);\n        setIsLapsedSubscriber(false);\n        alert(\"Your purchases have been restored.\");\n      } else {\n        alert(\"No active subscriptions found to restore.\");\n      }\n    } catch (error) {\n      console.error(error);\n      alert(\"Failed to restore purchases. Please try again.\");\n    }\n  };\n\n  const handleLoginBack = () => {\n    if (joinToken) {\n      setView('join');\n    } else if (bubbleCreationData) {\n      setView('create');\n    } else {\n      setView('welcome');\n    }\n  };\n\n  const resetAuthFlow = () => {\n    setView('login');\n    setJoinToken(null);\n    setBubbleCreationData(null);\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-blue-950 flex items-center justify-center\">\n        <div className=\"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n\n  if (!currentUser) {\n    if (view === 'welcome') {\n      return <Welcome \n                onLogin={resetAuthFlow} \n                onCreate={() => setView('create')}\n                onJoin={() => setView('join')} \n              />;\n    }\n    if (view === 'join') {\n      return <JoinBubble \n                onJoin={(token) => { setJoinToken(token); setView('login'); }} \n                onBack={() => setView('welcome')} \n              />;\n    }\n    if (view === 'create') {\n      return <CreateBubbleFlow \n                handlePurchase={handlePurchase}\n                onComplete={(data) => {\n                  setBubbleCreationData(data);\n                  // Go to a success screen instead of straight to the app\n                  setView('purchaseSuccess');\n                }}\n                onBack={() => setView('welcome')}\n              />;\n    }\n    if (view === 'purchaseSuccess') {\n      return <PurchaseSuccessView \n                onContinue={async () => {\n                  try {\n                    const data = bubbleCreationData;\n                    const userCredential = await auth.createUserWithEmailAndPassword(data.email, data.password);\n                    const newUser = userCredential.user;\n\n                    // Link anonymous RevenueCat user to the new Firebase user\n                    if (anonymousId) {\n                      console.log(`Logging into RevenueCat to link anonymous user ${anonymousId} to ${newUser.uid}`);\n                      await Purchases.getSharedInstance().logIn(newUser.uid);\n                      setAnonymousId(null);\n                    }\n                    // The onAuthStateChanged listener will now pick up the new user and switch to the main app view.\n                  } catch (error) {\n                    console.error(\"Firebase user creation failed:\", error);\n                    setPurchaseError(`Account creation failed: ${error.message}`);\n                    setView('purchaseError');\n                  }\n                }} \n              />;\n    }\n    if (view === 'purchaseError') {\n      return <PurchaseErrorView\n                message={purchaseError}\n                onRetry={() => {\n                  setView('create');\n                  setPurchaseError(null);\n                }}\n              />;\n    }\n    if (view === 'login') {\n      return <Login onLoginSuccess={() => setView('main')} onBack={handleLoginBack} />;\n    }\n  }\n\n  // This screen is now only for lapsed subscribers who log in\n  if (view === 'main' && isLapsedSubscriber && !isSubscribed) {\n    return (\n      <div className=\"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-6 text-center\">\n          <h1 className=\"text-3xl font-bold text-white mb-4\">Your Subscription has Expired</h1>\n          <p className=\"text-gray-400 mb-8\">Please renew your subscription to continue using premium features.</p>\n          <button\n            onClick={() => handlePurchase()}\n            className=\"w-full max-w-sm bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg hover:shadow-purple-600/30 transition-all\"\n          >\n            Renew Subscription\n          </button>\n           <button\n            onClick={handleLogout}\n            className=\"mt-8 text-gray-400 text-sm hover:text-white transition-colors\"\n          >\n            Sign Out\n          </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-950\">\n      <MainApp \n        userId={currentUser.uid} \n        onLogout={handleLogout} \n        joinToken={joinToken} \n        bubbleCreationData={bubbleCreationData}\n        onBubbleCreated={() => setBubbleCreationData(null)}\n        isSubscribed={isSubscribed}\n        onUpgrade={handlePurchase}\n        onRestorePurchases={handleRestorePurchases}\n        onInitiateCreate={() => setView('create')}\n      />\n    </div>\n  );\n}\n\nconst PurchaseSuccessView = ({ onContinue }) => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-950 via-black to-blue-950 text-white flex flex-col items-center justify-center p-4 text-center\">\n      <div className=\"max-w-md w-full z-10\">\n        <div className=\"bg-white/5 border border-white/10 rounded-3xl p-8 backdrop-blur-lg\">\n          <CheckCircle2 size={64} className=\"mx-auto text-emerald-400 mb-6\" />\n          <h1 className=\"text-4xl font-bold mb-2\">Purchase Successful!</h1>\n          <p className=\"text-gray-400 mb-8\">\n            Welcome to FamilyBubble Premium. Let's finish creating your bubble.\n          </p>\n          <button\n            onClick={onContinue}\n            className=\"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-purple-600/30 transition-all transform hover:scale-105\"\n          >\n            Continue\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst PurchaseErrorView = ({ message, onRetry }) => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-950 via-black to-rose-900 text-white flex flex-col items-center justify-center p-4 text-center\">\n      <div className=\"max-w-md w-full z-10\">\n        <div className=\"bg-white/5 border border-white/10 rounded-3xl p-8 backdrop-blur-lg\">\n          <XCircle size={64} className=\"mx-auto text-rose-500 mb-6\" />\n          <h1 className=\"text-4xl font-bold mb-2\">Purchase Failed</h1>\n          <p className=\"text-gray-400 mb-8\">\n            {message || \"An unexpected error occurred. Please try again.\"}\n          </p>\n          <button\n            onClick={onRetry}\n            className=\"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-purple-600/30 transition-all transform hover:scale-105\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,IAAI,QAAQ,YAAY;AACjC,OAAOC,OAAO,MAAM,6BAA6B;AACjD,OAAOC,OAAO,MAAM,2BAA2B;AAC/C,OAAOC,KAAK,MAAM,yBAAyB;AAC3C,OAAOC,UAAU,MAAM,8BAA8B;AACrD,OAAOC,gBAAgB,MAAM,oCAAoC;AACjE,SAASC,SAAS,EAAEC,QAAQ,QAAQ,0BAA0B;AAC9D,SAASC,YAAY,EAAEC,OAAO,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,eAAe,SAASC,eAAeA,CAAA,EAAG;EAAAC,EAAA;EACxC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACoB,IAAI,EAAEC,OAAO,CAAC,GAAGrB,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACwB,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAClE,MAAM,CAAC0B,YAAY,EAAEC,eAAe,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAAC4B,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAAC8B,aAAa,EAAEC,gBAAgB,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACgC,WAAW,EAAEC,cAAc,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAEpDC,SAAS,CAAC,MAAM;IACd,MAAMiC,mBAAmB,GAAG,MAAOC,IAAI,IAAK;MAC1C3B,SAAS,CAAC4B,WAAW,CAAC3B,QAAQ,CAAC4B,KAAK,CAAC;MAErC,MAAM7B,SAAS,CAAC8B,SAAS,CAAC;QACxBC,MAAM,EAAE,kCAAkC;QAC1CC,SAAS,EAAEL,IAAI,CAACM;MAClB,CAAC,CAAC;;MAEF;MACAjC,SAAS,CAACkC,6BAA6B,CAAEC,IAAI,IAAK;QAChD,MAAMC,kBAAkB,GAAGD,IAAI,CAACE,YAAY,CAACC,MAAM,CAAC,sBAAsB,CAAC;QAC3E,IAAI,OAAOF,kBAAkB,KAAK,WAAW,EAAE;UAC7CjB,eAAe,CAAC,IAAI,CAAC;QACvB,CAAC,MAAM;UACLA,eAAe,CAAC,KAAK,CAAC;QACxB;MACF,CAAC,CAAC;MAEF,MAAMoB,YAAY,GAAG,MAAMvC,SAAS,CAACwC,iBAAiB,CAAC,CAAC,CAACC,eAAe,CAAC,CAAC;MAC1E,MAAML,kBAAkB,GAAGG,YAAY,CAACF,YAAY,CAACC,MAAM,CAAC,sBAAsB,CAAC;MACnF,MAAMI,iBAAiB,GAAGH,YAAY,CAACF,YAAY,CAACM,GAAG,CAAC,sBAAsB,CAAC;MAE/E,IAAI,OAAOP,kBAAkB,KAAK,WAAW,EAAE;QAC7CjB,eAAe,CAAC,IAAI,CAAC;MACvB,CAAC,MAAM,IAAI,OAAOuB,iBAAiB,KAAK,WAAW,EAAE;QACnDrB,qBAAqB,CAAC,IAAI,CAAC;MAC7B;IACF,CAAC;IAED,MAAMuB,WAAW,GAAGlD,IAAI,CAACmD,kBAAkB,CAAC,MAAMlB,IAAI,IAAI;MACxDlB,cAAc,CAACkB,IAAI,CAAC;MACpBhB,UAAU,CAAC,KAAK,CAAC;MAEjB,IAAIgB,IAAI,IAAI,CAACA,IAAI,CAACmB,WAAW,EAAE;QAAE;QAC/B,MAAMpB,mBAAmB,CAACC,IAAI,CAAC;QAC/Bd,OAAO,CAAC,MAAM,CAAC;MACjB,CAAC,MAAM,IAAIc,IAAI,IAAIA,IAAI,CAACmB,WAAW,EAAE;QACnC;MAAA;IAEJ,CAAC,CAAC;IACF,OAAO,MAAMF,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,YAAY,GAAGA,CAAA,KAAM;IACzBrD,IAAI,CAACsD,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;MACxBjD,SAAS,CAACwC,iBAAiB,CAAC,CAAC,CAACU,MAAM,CAAC,CAAC;MACtC/B,eAAe,CAAC,KAAK,CAAC;MACtBE,qBAAqB,CAAC,KAAK,CAAC;MAC5BR,OAAO,CAAC,SAAS,CAAC;MAClBE,YAAY,CAAC,IAAI,CAAC;MAClBE,qBAAqB,CAAC,IAAI,CAAC;IAC7B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMkC,cAAc,GAAG,MAAOC,SAAS,IAAK;IAC1C,IAAI;MACF;MACA,IAAI,CAACpD,SAAS,CAACqD,YAAY,CAAC,CAAC,EAAE;QAC7BC,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;QAC1D,MAAMvB,SAAS,GAAGhC,SAAS,CAACwD,oCAAoC,CAAC,CAAC;QAClE/B,cAAc,CAACO,SAAS,CAAC,CAAC,CAAC;QAC3B,MAAMhC,SAAS,CAAC8B,SAAS,CAAC;UACxBC,MAAM,EAAE,kCAAkC;UAC1CC,SAAS,EAAEA;QACb,CAAC,CAAC;MACJ;MAEA,MAAMyB,SAAS,GAAGzD,SAAS,CAACwC,iBAAiB,CAAC,CAAC;MAC/C,MAAMkB,SAAS,GAAG,MAAMD,SAAS,CAACE,YAAY,CAAC,CAAC;MAChD,MAAMC,eAAe,GAAGF,SAAS,CAACG,OAAO;MACzC,IAAI,CAACD,eAAe,EAAE;QACpBE,KAAK,CAAC,qBAAqB,CAAC;QAC5B;MACF;MAEA,MAAM;QAAEvB;MAAa,CAAC,GAAG,MAAMkB,SAAS,CAACM,cAAc,CAAC;QAAEC,QAAQ,EAAEJ;MAAgB,CAAC,CAAC;;MAEtF;MACA,IAAIR,SAAS,EAAE;QACbA,SAAS,CAAC,CAAC;MACb;IACF,CAAC,CAAC,OAAOa,KAAK,EAAE;MACdX,OAAO,CAACW,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;;MAE/D;MACA,MAAMC,WAAW,GAAGD,KAAK,CAACE,IAAI,KAAK,CAAC,CAAC,CAAC;;MAEtC,IAAID,WAAW,EAAE;QACbZ,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;QAClD;QACA;MACJ;;MAEA;MACAhC,gBAAgB,CAAC,wFAAwF,CAAC;MAC1GV,OAAO,CAAC,eAAe,CAAC;IAC1B;EACF,CAAC;EAED,MAAMuD,sBAAsB,GAAG,MAAAA,CAAA,KAAY;IACzC,IAAI;MACF,MAAM7B,YAAY,GAAG,MAAMvC,SAAS,CAACwC,iBAAiB,CAAC,CAAC,CAAC6B,gBAAgB,CAAC,CAAC;MAC3E,MAAMjC,kBAAkB,GAAGG,YAAY,CAACF,YAAY,CAACC,MAAM,CAAC,sBAAsB,CAAC;MAEnF,IAAI,OAAOF,kBAAkB,KAAK,WAAW,EAAE;QAC7CjB,eAAe,CAAC,IAAI,CAAC;QACrBE,qBAAqB,CAAC,KAAK,CAAC;QAC5ByC,KAAK,CAAC,oCAAoC,CAAC;MAC7C,CAAC,MAAM;QACLA,KAAK,CAAC,2CAA2C,CAAC;MACpD;IACF,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdX,OAAO,CAACW,KAAK,CAACA,KAAK,CAAC;MACpBH,KAAK,CAAC,gDAAgD,CAAC;IACzD;EACF,CAAC;EAED,MAAMQ,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAIxD,SAAS,EAAE;MACbD,OAAO,CAAC,MAAM,CAAC;IACjB,CAAC,MAAM,IAAIG,kBAAkB,EAAE;MAC7BH,OAAO,CAAC,QAAQ,CAAC;IACnB,CAAC,MAAM;MACLA,OAAO,CAAC,SAAS,CAAC;IACpB;EACF,CAAC;EAED,MAAM0D,aAAa,GAAGA,CAAA,KAAM;IAC1B1D,OAAO,CAAC,OAAO,CAAC;IAChBE,YAAY,CAAC,IAAI,CAAC;IAClBE,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,IAAIP,OAAO,EAAE;IACX,oBACEL,OAAA;MAAKmE,SAAS,EAAC,wGAAwG;MAAAC,QAAA,eACrHpE,OAAA;QAAKmE,SAAS,EAAC;MAAmF;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtG,CAAC;EAEV;EAEA,IAAI,CAACrE,WAAW,EAAE;IAChB,IAAII,IAAI,KAAK,SAAS,EAAE;MACtB,oBAAOP,OAAA,CAACT,OAAO;QACLkF,OAAO,EAAEP,aAAc;QACvBQ,QAAQ,EAAEA,CAAA,KAAMlE,OAAO,CAAC,QAAQ,CAAE;QAClCmE,MAAM,EAAEA,CAAA,KAAMnE,OAAO,CAAC,MAAM;MAAE;QAAA6D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/B,CAAC;IACZ;IACA,IAAIjE,IAAI,KAAK,MAAM,EAAE;MACnB,oBAAOP,OAAA,CAACP,UAAU;QACRkF,MAAM,EAAGC,KAAK,IAAK;UAAElE,YAAY,CAACkE,KAAK,CAAC;UAAEpE,OAAO,CAAC,OAAO,CAAC;QAAE,CAAE;QAC9DqE,MAAM,EAAEA,CAAA,KAAMrE,OAAO,CAAC,SAAS;MAAE;QAAA6D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClC,CAAC;IACZ;IACA,IAAIjE,IAAI,KAAK,QAAQ,EAAE;MACrB,oBAAOP,OAAA,CAACN,gBAAgB;QACdoD,cAAc,EAAEA,cAAe;QAC/BgC,UAAU,EAAGC,IAAI,IAAK;UACpBnE,qBAAqB,CAACmE,IAAI,CAAC;UAC3B;UACAvE,OAAO,CAAC,iBAAiB,CAAC;QAC5B,CAAE;QACFqE,MAAM,EAAEA,CAAA,KAAMrE,OAAO,CAAC,SAAS;MAAE;QAAA6D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClC,CAAC;IACZ;IACA,IAAIjE,IAAI,KAAK,iBAAiB,EAAE;MAC9B,oBAAOP,OAAA,CAACgF,mBAAmB;QACjBC,UAAU,EAAE,MAAAA,CAAA,KAAY;UACtB,IAAI;YACF,MAAMF,IAAI,GAAGpE,kBAAkB;YAC/B,MAAMuE,cAAc,GAAG,MAAM7F,IAAI,CAAC8F,8BAA8B,CAACJ,IAAI,CAACK,KAAK,EAAEL,IAAI,CAACM,QAAQ,CAAC;YAC3F,MAAMC,OAAO,GAAGJ,cAAc,CAAC5D,IAAI;;YAEnC;YACA,IAAIH,WAAW,EAAE;cACf8B,OAAO,CAACC,GAAG,CAAC,kDAAkD/B,WAAW,OAAOmE,OAAO,CAAC1D,GAAG,EAAE,CAAC;cAC9F,MAAMjC,SAAS,CAACwC,iBAAiB,CAAC,CAAC,CAACoD,KAAK,CAACD,OAAO,CAAC1D,GAAG,CAAC;cACtDR,cAAc,CAAC,IAAI,CAAC;YACtB;YACA;UACF,CAAC,CAAC,OAAOwC,KAAK,EAAE;YACdX,OAAO,CAACW,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;YACtD1C,gBAAgB,CAAC,4BAA4B0C,KAAK,CAAC4B,OAAO,EAAE,CAAC;YAC7DhF,OAAO,CAAC,eAAe,CAAC;UAC1B;QACF;MAAE;QAAA6D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IACZ;IACA,IAAIjE,IAAI,KAAK,eAAe,EAAE;MAC5B,oBAAOP,OAAA,CAACyF,iBAAiB;QACfD,OAAO,EAAEvE,aAAc;QACvByE,OAAO,EAAEA,CAAA,KAAM;UACblF,OAAO,CAAC,QAAQ,CAAC;UACjBU,gBAAgB,CAAC,IAAI,CAAC;QACxB;MAAE;QAAAmD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IACZ;IACA,IAAIjE,IAAI,KAAK,OAAO,EAAE;MACpB,oBAAOP,OAAA,CAACR,KAAK;QAACmG,cAAc,EAAEA,CAAA,KAAMnF,OAAO,CAAC,MAAM,CAAE;QAACqE,MAAM,EAAEZ;MAAgB;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAClF;EACF;;EAEA;EACA,IAAIjE,IAAI,KAAK,MAAM,IAAIQ,kBAAkB,IAAI,CAACF,YAAY,EAAE;IAC1D,oBACEb,OAAA;MAAKmE,SAAS,EAAC,oFAAoF;MAAAC,QAAA,gBAC/FpE,OAAA;QAAImE,SAAS,EAAC,oCAAoC;QAAAC,QAAA,EAAC;MAA6B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACrFxE,OAAA;QAAGmE,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAkE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACxGxE,OAAA;QACE4F,OAAO,EAAEA,CAAA,KAAM9C,cAAc,CAAC,CAAE;QAChCqB,SAAS,EAAC,iKAAiK;QAAAC,QAAA,EAC5K;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACRxE,OAAA;QACC4F,OAAO,EAAElD,YAAa;QACtByB,SAAS,EAAC,+DAA+D;QAAAC,QAAA,EAC1E;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAEV;EAEA,oBACExE,OAAA;IAAKmE,SAAS,EAAC,0BAA0B;IAAAC,QAAA,eACvCpE,OAAA,CAACV,OAAO;MACNuG,MAAM,EAAE1F,WAAW,CAACyB,GAAI;MACxBkE,QAAQ,EAAEpD,YAAa;MACvBjC,SAAS,EAAEA,SAAU;MACrBE,kBAAkB,EAAEA,kBAAmB;MACvCoF,eAAe,EAAEA,CAAA,KAAMnF,qBAAqB,CAAC,IAAI,CAAE;MACnDC,YAAY,EAAEA,YAAa;MAC3BmF,SAAS,EAAElD,cAAe;MAC1BmD,kBAAkB,EAAElC,sBAAuB;MAC3CmC,gBAAgB,EAAEA,CAAA,KAAM1F,OAAO,CAAC,QAAQ;IAAE;MAAA6D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3C;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAACtE,EAAA,CA5PuBD,eAAe;AAAAkG,EAAA,GAAflG,eAAe;AA8PvC,MAAM+E,mBAAmB,GAAGA,CAAC;EAAEC;AAAW,CAAC,KAAK;EAC9C,oBACEjF,OAAA;IAAKmE,SAAS,EAAC,yIAAyI;IAAAC,QAAA,eACtJpE,OAAA;MAAKmE,SAAS,EAAC,sBAAsB;MAAAC,QAAA,eACnCpE,OAAA;QAAKmE,SAAS,EAAC,oEAAoE;QAAAC,QAAA,gBACjFpE,OAAA,CAACH,YAAY;UAACuG,IAAI,EAAE,EAAG;UAACjC,SAAS,EAAC;QAA+B;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACpExE,OAAA;UAAImE,SAAS,EAAC,yBAAyB;UAAAC,QAAA,EAAC;QAAoB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjExE,OAAA;UAAGmE,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAElC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACJxE,OAAA;UACE4F,OAAO,EAAEX,UAAW;UACpBd,SAAS,EAAC,yNAAyN;UAAAC,QAAA,EACpO;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC6B,GAAA,GApBIrB,mBAAmB;AAsBzB,MAAMS,iBAAiB,GAAGA,CAAC;EAAED,OAAO;EAAEE;AAAQ,CAAC,KAAK;EAClD,oBACE1F,OAAA;IAAKmE,SAAS,EAAC,yIAAyI;IAAAC,QAAA,eACtJpE,OAAA;MAAKmE,SAAS,EAAC,sBAAsB;MAAAC,QAAA,eACnCpE,OAAA;QAAKmE,SAAS,EAAC,oEAAoE;QAAAC,QAAA,gBACjFpE,OAAA,CAACF,OAAO;UAACsG,IAAI,EAAE,EAAG;UAACjC,SAAS,EAAC;QAA4B;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC5DxE,OAAA;UAAImE,SAAS,EAAC,yBAAyB;UAAAC,QAAA,EAAC;QAAe;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC5DxE,OAAA;UAAGmE,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAC9BoB,OAAO,IAAI;QAAiD;UAAAnB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5D,CAAC,eACJxE,OAAA;UACE4F,OAAO,EAAEF,OAAQ;UACjBvB,SAAS,EAAC,yNAAyN;UAAAC,QAAA,EACpO;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC8B,GAAA,GApBIb,iBAAiB;AAAA,IAAAU,EAAA,EAAAE,GAAA,EAAAC,GAAA;AAAAC,YAAA,CAAAJ,EAAA;AAAAI,YAAA,CAAAF,GAAA;AAAAE,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}